# –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫ Nikita

–†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–µ –∏ —Ä–µ—à–µ–Ω–∏—é —Ç–∏–ø–∏—á–Ω—ã—Ö –ø—Ä–æ–±–ª–µ–º –ø—Ä–∏ —Ä–∞–±–æ—Ç–µ —Å–æ —Å–ª—É–∂–±–æ–π Nikita.

---

## –°–æ–¥–µ—Ä–∂–∞–Ω–∏–µ

- [FAQ ‚Äî –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã](#faq--—á–∞—Å—Ç—ã–µ-–≤–æ–ø—Ä–æ—Å—ã)
- [–ü—Ä–æ–±–ª–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏](#–ø—Ä–æ–±–ª–µ–º—ã-—É—Å—Ç–∞–Ω–æ–≤–∫–∏)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏)
- [–ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–∞–º–∏ 1–°](#–ø—Ä–æ–±–ª–µ–º—ã-—Å-–±–∞–∑–∞–º–∏-1—Å)
- [–ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏](#–ø—Ä–æ–±–ª–µ–º—ã-–ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏)
- [–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã](#–¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ-–∫–æ–º–∞–Ω–¥—ã)

---

## FAQ ‚Äî –ß–∞—Å—Ç—ã–µ –≤–æ–ø—Ä–æ—Å—ã

### –ö–∞–∫ –ø—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Å–ª—É–∂–±–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç?

**Linux:**
```bash
sudo systemctl status Nikita
```

**Windows:**
```powershell
sc query Nikita
```

–ò–ª–∏ –æ—Ç–∫—Ä–æ–π—Ç–µ –≤–µ–±-–ø–∞–Ω–µ–ª—å: `http://localhost:8984/`

### –ì–¥–µ –Ω–∞—Ö–æ–¥—è—Ç—Å—è –ª–æ–≥–∏?

**Linux:**
- –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `/opt/Nikita/debug/Nikita.*.log`
- –õ–æ–≥–∏ systemd: `sudo journalctl -u Nikita -n 100`

**Windows:**
- –õ–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è: `C:\Program Files\Nikita\debug\Nikita.*.log`
- Event Log: `Get-EventLog -LogName Application -Source Nikita -Newest 10`

### –ö–∞–∫ –≤–∫–ª—é—á–∏—Ç—å –æ—Ç–ª–∞–¥–æ—á–Ω—ã–π —Ä–µ–∂–∏–º?

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```ini
DEBUG_ENABLED=true
DEBUG_PARSER=true
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É:
```bash
sudo systemctl restart Nikita
```

–ò–ª–∏ –≤–∫–ª—é—á–∏—Ç–µ —á–µ—Ä–µ–∑ –≤–µ–±-–∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å (–≥–∞–ª–æ—á–∫–∞ "üêõ –û—Ç–ª–∞–¥–∫–∞").

### –ö–∞–∫ –ø—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏?

**Linux:**
```bash
tail -f /opt/Nikita/debug/Nikita.*.log
```

**Windows:**
```powershell
Get-Content "C:\Program Files\Nikita\debug\Nikita.*.log" -Tail 50 -Wait
```

### –ö–∞–∫ —É–∑–Ω–∞—Ç—å, –∫–∞–∫–∏–µ –±–∞–∑—ã 1–° –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã?

–û—Ç–∫—Ä–æ–π—Ç–µ JSON API:
```bash
curl -s http://localhost:8984/stats_api | jq '.databases'
```

–ò–ª–∏ –ø–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –Ω–∞ –≤–µ–±-–ø–∞–Ω–µ–ª–∏ –≤ —Ä–∞–∑–¥–µ–ª–µ "–°–ø–∏—Å–æ–∫ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º—ã—Ö –±–∞–∑ 1–°".

---

## –ü—Ä–æ–±–ª–µ–º—ã —É—Å—Ç–∞–Ω–æ–≤–∫–∏

### –°–ª—É–∂–±–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (Linux)

**–°–∏–º–ø—Ç–æ–º—ã:**
```bash
$ sudo systemctl status Nikita
‚óè Nikita.service - failed
   Active: failed (Result: exit-code)
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –¥–µ—Ç–∞–ª—å–Ω—ã—Ö –ª–æ–≥–æ–≤
sudo journalctl -u Nikita -n 50 --no-pager

# –ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏
/opt/Nikita/venv/bin/python /opt/Nikita/Nikita.py console
```

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

#### 1. –ü—Ä–∞–≤–∞ –¥–æ—Å—Ç—É–ø–∞ (Exit Code 77)

**–ü—Ä–æ–±–ª–µ–º–∞:** –£ —Å–ª—É–∂–±—ã –Ω–µ—Ç –ø—Ä–∞–≤ –Ω–∞ –∑–∞–ø–∏—Å—å –≤ `/opt/Nikita`

**–†–µ—à–µ–Ω–∏–µ:**
```bash
sudo chown -R usr1cv8:grp1cv8 /opt/Nikita
sudo chmod -R 755 /opt/Nikita
```

#### 2. –û—à–∏–±–∫–∞ –∏–º–ø–æ—Ä—Ç–∞ –º–æ–¥—É–ª–µ–π

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–†–µ—à–µ–Ω–∏–µ:**
```bash
cd /opt/Nikita
sudo venv/bin/pip install -r requirements.lin
```

#### 3. –û—à–∏–±–∫–∞ –≤ —Ñ–∞–π–ª–µ `.env`

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π —Å–∏–Ω—Ç–∞–∫—Å–∏—Å –≤ `.env`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –ª–∏—à–Ω–∏—Ö –∫–∞–≤—ã—á–µ–∫
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∏–ª—å–Ω–æ—Å—Ç—å –ø—É—Ç–µ–π
- –ó–∞–ø—É—Å—Ç–∏—Ç–µ –≤ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ –¥–ª—è –ø—Ä–æ—Å–º–æ—Ç—Ä–∞ –æ—à–∏–±–æ–∫

#### 4. ClickHouse –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–ª—É–∂–±–∞ –Ω–µ –º–æ–∂–µ—Ç –ø–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ ClickHouse

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å ClickHouse
sudo systemctl status clickhouse-server

# –ó–∞–ø—É—Å—Ç–∏—Ç–µ ClickHouse
sudo systemctl start clickhouse-server

# –ò–ª–∏ –æ—Ç–∫–ª—é—á–∏—Ç–µ ClickHouse –≤ .env
CLICKHOUSE_ENABLED=false
```

### –°–ª—É–∂–±–∞ –Ω–µ –∑–∞–ø—É—Å–∫–∞–µ—Ç—Å—è (Windows)

**–°–∏–º–ø—Ç–æ–º—ã:**
```
Error 1053: The service did not respond to the start or control request in a timely fashion
```

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```powershell
# –ó–∞–ø—É—Å–∫ –≤ –∫–æ–Ω—Å–æ–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ
cd "C:\Program Files\Nikita"
python Nikita.py console
```

**–¢–∏–ø–∏—á–Ω—ã–µ –ø—Ä–∏—á–∏–Ω—ã:**

#### 1. Python –Ω–µ –Ω–∞–π–¥–µ–Ω

**–ü—Ä–æ–±–ª–µ–º–∞:** Python –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω –∏–ª–∏ –Ω–µ –≤ PATH

**–†–µ—à–µ–Ω–∏–µ:**
- –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ Python 3.10+ —Å [python.org](https://www.python.org/)
- –ü—Ä–∏ —É—Å—Ç–∞–Ω–æ–≤–∫–µ –æ—Ç–º–µ—Ç—å—Ç–µ "Add Python to PATH"

#### 2. –û—Ç—Å—É—Ç—Å—Ç–≤—É—é—Ç –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏

**–ü—Ä–æ–±–ª–µ–º–∞:** –ù–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –±–∏–±–ª–∏–æ—Ç–µ–∫–∏

**–†–µ—à–µ–Ω–∏–µ:**
```powershell
pip install -r requirements.win
```

#### 3. –û—à–∏–±–∫–∞ –≤ `.env`

**–†–µ—à–µ–Ω–∏–µ:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—É—Ç–∏ (–∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ –æ–±—Ä–∞—Ç–Ω—ã–π —Å–ª—ç—à: `C:\path\to\dir`)
- –ò–ª–∏ –¥–≤–æ–π–Ω–æ–π —Å–ª—ç—à: `C:\\path\\to\\dir`

### –û—à–∏–±–∫–∞ "Module not found"

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
ModuleNotFoundError: No module named 'clickhouse_driver'
```

**–†–µ—à–µ–Ω–∏–µ:**

**Linux:**
```bash
cd /opt/Nikita
sudo venv/bin/pip install -r requirements.lin
```

**Windows:**
```powershell
pip install -r requirements.win
```

### –û—à–∏–±–∫–∞ "Permission denied" (Linux)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
PermissionError: [Errno 13] Permission denied: '/opt/Nikita/debug'
```

**–†–µ—à–µ–Ω–∏–µ:**
```bash
# –°–æ–∑–¥–∞–π—Ç–µ –∫–∞—Ç–∞–ª–æ–≥ debug
sudo mkdir -p /opt/Nikita/debug

# –£—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –≤–ª–∞–¥–µ–ª—å—Ü–∞
sudo chown -R usr1cv8:grp1cv8 /opt/Nikita

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞
ls -la /opt/Nikita/
```

---

## –ü—Ä–æ–±–ª–µ–º—ã —Å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è–º–∏

### ClickHouse –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω (üî¥ –Ω–∞ –≤–µ–±-–ø–∞–Ω–µ–ª–∏)

**–°–∏–º–ø—Ç–æ–º—ã:**
- üî¥ –ö—Ä–∞—Å–Ω—ã–π –∏–Ω–¥–∏–∫–∞—Ç–æ—Ä –Ω–∞ –≤–µ–±-–ø–∞–Ω–µ–ª–∏
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö: `‚úó CLICKHOUSE: –û—à–∏–±–∫–∞ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è`

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# Linux: –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å ClickHouse
sudo systemctl status clickhouse-server

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
clickhouse-client --query "SELECT 1"

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
sudo ss -tlnp | grep 9000
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. ClickHouse –Ω–µ –∑–∞–ø—É—â–µ–Ω

```bash
sudo systemctl start clickhouse-server
sudo systemctl enable clickhouse-server
```

#### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:
```ini
CLICKHOUSE_HOST=localhost  # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π —Ö–æ—Å—Ç?
CLICKHOUSE_PORT=9000       # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç?
CLICKHOUSE_USER=default    # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—å?
CLICKHOUSE_PASSWORD=       # –ü—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–∞—Ä–æ–ª—å?
```

#### 3. Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ

```bash
# Linux (Ubuntu/Debian)
sudo ufw allow 9000/tcp

# Linux (CentOS/RHEL)
sudo firewall-cmd --add-port=9000/tcp --permanent
sudo firewall-cmd --reload
```

#### 4. ClickHouse –Ω–µ —Å–ª—É—à–∞–µ—Ç –Ω—É–∂–Ω—ã–π –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `/etc/clickhouse-server/config.xml`:
```xml
<listen_host>0.0.0.0</listen_host>
```

–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ:
```bash
sudo systemctl restart clickhouse-server
```

### Solr –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö: `‚úó SOLR: Connection refused`

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø–æ—Ä—Ç
curl http://localhost:8983/solr/admin/ping

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –ø—Ä–æ—Ü–µ—Å—Å–∞
ps aux | grep solr
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. Solr –Ω–µ –∑–∞–ø—É—â–µ–Ω

```bash
# –ó–∞–ø—É—Å–∫ Solr
cd /path/to/solr
bin/solr start
```

#### 2. –û—Ç–∫–ª—é—á–∏—Ç–µ Solr, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```ini
SOLR_ENABLED=false
```

### Redis –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω

**–°–∏–º–ø—Ç–æ–º—ã:**
- –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö: `‚úó REDIS: Connection refused`

**–†–µ—à–µ–Ω–∏—è:**

#### 1. Redis –Ω–µ —É—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω/–Ω–µ –∑–∞–ø—É—â–µ–Ω

```bash
# Linux
sudo apt install redis  # Ubuntu/Debian
sudo yum install redis  # CentOS/RHEL
sudo systemctl start redis
sudo systemctl enable redis
```

#### 2. –û—Ç–∫–ª—é—á–∏—Ç–µ Redis, –µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ

–û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ `.env`:
```ini
REDIS_ENABLED=false
```

### –í–µ–±-–ø–∞–Ω–µ–ª—å –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- `http://localhost:8984/` –Ω–µ –æ—Ç–∫—Ä—ã–≤–∞–µ—Ç—Å—è
- `Connection refused` –∏–ª–∏ `ERR_CONNECTION_REFUSED`

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —Å–ª—É—à–∞–µ—Ç –ª–∏ —Å–ª—É–∂–±–∞ –ø–æ—Ä—Ç
sudo ss -tlnp | grep 8984  # Linux
netstat -an | findstr 8984  # Windows
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. –°–ª—É–∂–±–∞ –Ω–µ –∑–∞–ø—É—â–µ–Ω–∞

```bash
sudo systemctl start Nikita  # Linux
net start Nikita            # Windows
```

#### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø–æ—Ä—Ç –≤ `.env`

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ:
```ini
HTTP_LISTEN_PORT=8984
```

#### 3. Firewall –±–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ—Ä—Ç

**Linux:**
```bash
sudo ufw allow 8984/tcp
```

**Windows:**
```powershell
netsh advfirewall firewall add rule name="Nikita Web" dir=in action=allow protocol=TCP localport=8984
```

#### 4. –ü–æ—Ä—Ç –∑–∞–Ω—è—Ç –¥—Ä—É–≥–∏–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ–º

**Linux:**
```bash
sudo lsof -i :8984
```

**Windows:**
```powershell
netstat -ano | findstr :8984
```

–ò–∑–º–µ–Ω–∏—Ç–µ –ø–æ—Ä—Ç –≤ `.env` –∏–ª–∏ –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∫–æ–Ω—Ñ–ª–∏–∫—Ç—É—é—â–µ–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ.

---

## –ü—Ä–æ–±–ª–µ–º—ã —Å –±–∞–∑–∞–º–∏ 1–°

### –ë–∞–∑—ã 1–° –Ω–µ –æ–±–Ω–∞—Ä—É–∂–µ–Ω—ã

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ù–∞ –≤–µ–±-–ø–∞–Ω–µ–ª–∏: –ø—É—Å—Ç–æ–π —Å–ø–∏—Å–æ–∫ –±–∞–∑
- –í JSON API: `"databases": []`
- –í –ª–æ–≥–∞—Ö: `‚ö† –í–ù–ò–ú–ê–ù–ò–ï: –ù–µ –Ω–∞–π–¥–µ–Ω–æ –Ω–∏ –æ–¥–Ω–æ–π –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö 1–°!`

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –Ω–∞–ª–∏—á–∏–µ –∂—É—Ä–Ω–∞–ª–æ–≤
ls -la /home/usr1cv8/.1cv8/1C/1cv8/reg_*/*/1Cv8Log/

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é
grep C1_SRVINFO_PATH /opt/Nikita/.env
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –ø—É—Ç—å `C1_SRVINFO_PATH`

–ü—Ä–æ–≤–µ—Ä—å—Ç–µ `.env`:
```ini
# Linux
C1_SRVINFO_PATH=/home/usr1cv8/.1cv8/1C/1cv8

# Windows
C1_SRVINFO_PATH=C:\Users\usr1cv8\AppData\Roaming\1C\1cv8
```

#### 2. –ù–µ—Ç –ø—Ä–∞–≤ –¥–æ—Å—Ç—É–ø–∞ –∫ –∫–∞—Ç–∞–ª–æ–≥–∞–º (Linux)

```bash
# –î–æ–±–∞–≤—å—Ç–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è –≤ –≥—Ä—É–ø–ø—É usr1cv8
sudo usermod -a -G usr1cv8 $(whoami)

# –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Å–∫—Ä–∏–ø—Ç
sudo ./scripts/share.1cdata.sh

# –ü—Ä–∏–º–µ–Ω–∏—Ç–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è –≥—Ä—É–ø–ø—ã
newgrp usr1cv8

# –ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ —Å–ª—É–∂–±—É
sudo systemctl restart Nikita
```

#### 3. –ë–∞–∑—ã –≤ –Ω–µ—Å—Ç–∞–Ω–¥–∞—Ä—Ç–Ω–æ–º –º–µ—Å—Ç–µ

–£–∫–∞–∂–∏—Ç–µ –≤—Ä—É—á–Ω—É—é –≤ `.env`:
```ini
IBASE_0=–ú–æ—è–ë–∞–∑–∞
IBASE_0_JR=/–ø—É—Ç—å/–∫/1Cv8Log
IBASE_0_FORMAT=lgd
```

### –ë–∞–∑–∞ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∞, –Ω–æ –Ω–µ –æ–±—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç—Å—è

**–°–∏–º–ø—Ç–æ–º—ã:**
- –ë–∞–∑–∞ –µ—Å—Ç—å –≤ —Å–ø–∏—Å–∫–µ, –Ω–æ –ø—Ä–æ–≥—Ä–µ—Å—Å 0%
- –ù–µ—Ç –æ—à–∏–±–æ–∫ –≤ –ª–æ–≥–∞—Ö

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ø—Ä–∞–≤–∞ –Ω–∞ —á—Ç–µ–Ω–∏–µ —Ñ–∞–π–ª–æ–≤
ls -la /–ø—É—Ç—å/–∫/1Cv8Log/*.lgp
ls -la /–ø—É—Ç—å/–∫/1Cv8Log/*.lgd

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –æ—Ç–ª–∞–¥–æ—á–Ω—ã–µ –ª–æ–≥–∏
tail -f /opt/Nikita/debug/Nikita.*.log | grep "–ë–∞–∑–∞"
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. –ù–µ—Ç –Ω–æ–≤—ã—Ö –¥–∞–Ω–Ω—ã—Ö –≤ –∂—É—Ä–Ω–∞–ª–µ

- –í–æ–∑–º–æ–∂–Ω–æ, –±–∞–∑–∞ –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ, —á—Ç–æ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–∏ —Ä–∞–±–æ—Ç–∞—é—Ç –≤ 1–°

#### 2. –û—à–∏–±–∫–∞ –ø–∞—Ä—Å–∏–Ω–≥–∞

–í–∫–ª—é—á–∏—Ç–µ `DEBUG_PARSER=true` –≤ `.env` –∏ –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏.

### –û—à–∏–±–∫–∞ "Database is locked" (SQLite .lgd)

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
‚úó SQLITE: database is locked
```

**–ü—Ä–∏—á–∏–Ω–∞:** –ñ—É—Ä–Ω–∞–ª `.lgd` –æ–¥–Ω–æ–≤—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫—Ä—ã—Ç –≤ 1–° –∏ Nikita.

**–†–µ—à–µ–Ω–∏—è:**

#### 1. –í—Ä–µ–º–µ–Ω–Ω–æ–µ —Ä–µ—à–µ–Ω–∏–µ

–ü–æ–¥–æ–∂–¥–∏—Ç–µ, –ø–æ–∫–∞ 1–° –æ—Å–≤–æ–±–æ–¥–∏—Ç —Ñ–∞–π–ª (–æ–±—ã—á–Ω–æ –Ω–µ—Å–∫–æ–ª—å–∫–æ —Å–µ–∫—É–Ω–¥).

#### 2. –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Ç–∞–π–º–∞—É—Ç–æ–≤

SQLite –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–≤—Ç–æ—Ä—è–µ—Ç –ø–æ–ø—ã—Ç–∫–∏. –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –ø–æ—Å—Ç–æ—è–Ω–Ω–∞—è ‚Äî –ø—Ä–æ–≤–µ—Ä—å—Ç–µ, –Ω–µ –æ—Ç–∫—Ä—ã—Ç –ª–∏ —Ñ–∞–π–ª –≤ –¥—Ä—É–≥–∏—Ö –ø—Ä–æ–≥—Ä–∞–º–º–∞—Ö.

---

## –ü—Ä–æ–±–ª–µ–º—ã –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –í—ã—Å–æ–∫–∞—è –Ω–∞–≥—Ä—É–∑–∫–∞ –Ω–∞ CPU

**–°–∏–º–ø—Ç–æ–º—ã:**
- CPU –∑–∞–≥—Ä—É–∂–µ–Ω –Ω–∞ 80-100%
- –°–∏—Å—Ç–µ–º–∞ —Ç–æ—Ä–º–æ–∑–∏—Ç

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É
top | grep Nikita

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ –ø–æ—Ç–æ–∫–æ–≤
ps -eLf | grep Nikita | wc -l
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. –°–ª–∏—à–∫–æ–º –º–Ω–æ–≥–æ –ø–æ—Ç–æ–∫–æ–≤

–û–≥—Ä–∞–Ω–∏—á—å—Ç–µ –≤ `.env`:
```ini
PARSER_THREADS=4  # –í–º–µ—Å—Ç–æ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ
```

#### 2. –ú–Ω–æ–≥–æ –±–∞–∑ 1–°

–†–∞—Å—Å–º–æ—Ç—Ä–∏—Ç–µ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω–æ–µ –º–∞—Å—à—Ç–∞–±–∏—Ä–æ–≤–∞–Ω–∏–µ (–Ω–µ—Å–∫–æ–ª—å–∫–æ —ç–∫–∑–µ–º–ø–ª—è—Ä–æ–≤ Nikita).

### –í—ã—Å–æ–∫–æ–µ –ø–æ—Ç—Ä–µ–±–ª–µ–Ω–∏–µ –ø–∞–º—è—Ç–∏

**–°–∏–º–ø—Ç–æ–º—ã:**
- –°–ª—É–∂–±–∞ –ø–æ—Ç—Ä–µ–±–ª—è–µ—Ç –º–Ω–æ–≥–æ RAM (>2 GB)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
ps aux | grep Nikita
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. –û—Ç–∫–ª—é—á–∏—Ç–µ –Ω–µ–Ω—É–∂–Ω—ã–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç—ã

```ini
SOLR_ENABLED=false  # –ï—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ
REDIS_ENABLED=false
```

#### 2. –£–º–µ–Ω—å—à–∏—Ç–µ —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–µ–π

(–¢—Ä–µ–±—É–µ—Ç –∏–∑–º–µ–Ω–µ–Ω–∏—è –∫–æ–¥–∞ ‚Äî —Å–≤—è–∂–∏—Ç–µ—Å—å —Å —Ä–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫–∞–º–∏)

### –ú–µ–¥–ª–µ–Ω–Ω–∞—è –æ—Ç–ø—Ä–∞–≤–∫–∞ –≤ ClickHouse

**–°–∏–º–ø—Ç–æ–º—ã:**
- –í –ª–æ–≥–∞—Ö: –º–µ–¥–ª–µ–Ω–Ω–æ–µ –≤—Ä–µ–º—è –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è (>1 —Å–µ–∫ –Ω–∞ –±–∞—Ç—á)

**–î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞:**
```bash
# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–¥–µ—Ä–∂–∫—É —Å–µ—Ç–∏
ping clickhouse-server

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∑–∞–≥—Ä—É–∑–∫—É ClickHouse
clickhouse-client --query "SELECT * FROM system.processes"
```

**–†–µ—à–µ–Ω–∏—è:**

#### 1. ClickHouse –ø–µ—Ä–µ–≥—Ä—É–∂–µ–Ω

- –û–ø—Ç–∏–º–∏–∑–∏—Ä—É–π—Ç–µ –∑–∞–ø—Ä–æ—Å—ã
- –£–≤–µ–ª–∏—á—å—Ç–µ —Ä–µ—Å—É—Ä—Å—ã —Å–µ—Ä–≤–µ—Ä–∞ ClickHouse

#### 2. –°–µ—Ç–µ–≤–∞—è –∑–∞–¥–µ—Ä–∂–∫–∞

- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –ª–æ–∫–∞–ª—å–Ω—ã–π ClickHouse
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å–µ—Ç—å –º–µ–∂–¥—É —Å–µ—Ä–≤–µ—Ä–∞–º–∏

---

## –î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–µ –∫–æ–º–∞–Ω–¥—ã

### –ü–æ–ª–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–∏—Å—Ç–µ–º—ã (Linux)

```bash
#!/bin/bash
echo "=== Nikita Health Check ==="

echo "1. –°—Ç–∞—Ç—É—Å —Å–ª—É–∂–±—ã:"
sudo systemctl status Nikita --no-pager

echo -e "\n2. –í–µ–±-–ø–∞–Ω–µ–ª—å –¥–æ—Å—Ç—É–ø–Ω–∞:"
curl -I http://localhost:8984/ 2>/dev/null | head -1

echo -e "\n3. ClickHouse —Å—Ç–∞—Ç—É—Å:"
curl -s http://localhost:8984/stats_api | jq '.clickhouse.connection_ok'

echo -e "\n4. –û–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–µ –±–∞–∑—ã:"
curl -s http://localhost:8984/stats_api | jq '.databases | length'

echo -e "\n5. –û—à–∏–±–æ–∫ –∑–∞ —Å–µ—Å—Å–∏—é:"
curl -s http://localhost:8984/stats_api | jq '.clickhouse.total_errors'

echo -e "\n6. –ü–æ—Å–ª–µ–¥–Ω–∏–µ 10 —Å—Ç—Ä–æ–∫ –ª–æ–≥–æ–≤:"
tail -10 /opt/Nikita/debug/Nikita.*.log

echo -e "\n7. –û—à–∏–±–∫–∏ –≤ –ª–æ–≥–∞—Ö (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 50 —Å—Ç—Ä–æ–∫):"
tail -50 /opt/Nikita/debug/Nikita.*.log | grep "‚úó"

echo -e "\n=== –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–µ—Ä—à–µ–Ω–∞ ==="
```

### –°–±–æ—Ä –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–æ–π –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏

```bash
#!/bin/bash
# –°–∫—Ä–∏–ø—Ç –¥–ª—è —Å–±–æ—Ä–∞ –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –ø—Ä–∏ –æ–±—Ä–∞—â–µ–Ω–∏–∏ –≤ –ø–æ–¥–¥–µ—Ä–∂–∫—É

REPORT_FILE="nikita_diagnostic_$(date +%Y%m%d_%H%M%S).txt"

{
    echo "=== Nikita Diagnostic Report ==="
    echo "Date: $(date)"
    echo ""

    echo "=== System Info ==="
    uname -a
    echo ""

    echo "=== Python Version ==="
    python3 --version
    echo ""

    echo "=== Service Status ==="
    sudo systemctl status Nikita --no-pager
    echo ""

    echo "=== Configuration (.env) ==="
    cat /opt/Nikita/.env | grep -v PASSWORD
    echo ""

    echo "=== JSON API Stats ==="
    curl -s http://localhost:8984/stats_api | jq
    echo ""

    echo "=== Last 100 Log Lines ==="
    tail -100 /opt/Nikita/debug/Nikita.*.log
    echo ""

    echo "=== Errors in Logs ==="
    tail -500 /opt/Nikita/debug/Nikita.*.log | grep "‚úó"
    echo ""

} > "$REPORT_FILE"

echo "–î–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫–∏–π –æ—Ç—á—ë—Ç —Å–æ—Ö—Ä–∞–Ω—ë–Ω: $REPORT_FILE"
```

---

## –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ–º–æ—â–∏

–ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –Ω–µ —Ä–µ—à–µ–Ω–∞:

1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é:**
   - [–£—Å—Ç–∞–Ω–æ–≤–∫–∞](installation.md)
   - [–ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è](configuration.md)
   - [–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥](monitoring.md)

2. **–°–æ–±–µ—Ä–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é:**
   - –õ–æ–≥–∏ —Å–ª—É–∂–±—ã
   - –°–æ–¥–µ—Ä–∂–∏–º–æ–µ `.env` (–±–µ–∑ –ø–∞—Ä–æ–ª–µ–π)
   - –í—ã–≤–æ–¥ JSON API
   - –í–µ—Ä—Å–∏—è Nikita

3. **–°–æ–∑–¥–∞–π—Ç–µ Issue –Ω–∞ GitHub:**
   - [https://github.com/your-org/Nikita/issues](https://github.com/your-org/Nikita/issues)
   - –ü—Ä–∏–ª–æ–∂–∏—Ç–µ –¥–∏–∞–≥–Ω–æ—Å—Ç–∏—á–µ—Å–∫—É—é –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—é
   - –û–ø–∏—à–∏—Ç–µ —à–∞–≥–∏ –¥–ª—è –≤–æ—Å–ø—Ä–æ–∏–∑–≤–µ–¥–µ–Ω–∏—è

---

**–û–±–Ω–æ–≤–ª–µ–Ω–æ:** 2025-12-11  
**–í–µ—Ä—Å–∏—è:** 2.0.0

